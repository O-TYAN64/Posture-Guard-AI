<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <link rel="shortcut icon" href="{{ url_for('static', filename='models/favicon.ico') }}">
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision/vision_bundle.js" crossorigin="anonymous"></script>
  <title>Posture Guard AI</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>


{% if current_user.is_authenticated %}
<section class="login-box">
  <p>ログイン中：{{ current_user.username }}</p>
    {% if current_user.is_admin %}
    <a href="/debug">デバック</a>
    {% endif %}
  <a href="{{ url_for('auth.logout') }}">ログアウト</a>
</section>
{% else %}
{% endif %}


<header>
  <h1 align="center">
  <img src="{{ url_for('static', filename='models/favicon.ico') }}" width="72">
  <br>
  Posture Guard AI
  </h1>
  <p>AIがあなたの姿勢をリアルタイムでチェックします</p>
</header>

<main class="container">

  <!-- ===== カメラ表示 ===== -->
  <section class="camera-box">
    <video id="camera" autoplay muted playsinline>
    </video>
  </section>

  <!-- ===== 状態表示 ===== -->
  <section class="status-box">
    <div id="posture" class="posture">OFF</div>
    <div id="score">-</div>
    <div class="mono" id="msg"></div>
    <p id="message">カメラはオフです</p>

    {% if current_user.is_authenticated %}
      <div class="button-group">
        <button id="startBtn">計測開始</button>
        <button id="privacyBtn">プライバシーモード OFF</button>
        <button id="toggleCameraBtn">カメラをオン</button>
      </div>
    {% else %}
      <p>
        <button onclick="location.href='/register'">新規登録</button>
        <button onclick="location.href='/login'">ログイン</button>
      </p>
    {% endif %}
  </section>

</main>

<script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>